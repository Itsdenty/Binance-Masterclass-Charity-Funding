<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<link rel="apple-touch-icon" sizes="76x76" href="./assets/img/favicon.ico">
<link rel="icon" type="image/png" href="./assets/img/favicon.ico">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<title>Binance masterclass charity funding</title>
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport'/>
    
<!-- Google Font -->
<link href="https://fonts.googleapis.com/css?family=Nunito:300,400,600,800" rel="stylesheet">
    
<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    
<!-- Main CSS -->
<link href="./assets/css/main.css" rel="stylesheet"/>
    
<!-- Animation CSS -->
<link href="./assets/css/vendor/aos.css" rel="stylesheet"/>
    
</head>
    
<body> 
    
<!--------------------------------------
NAVBAR
--------------------------------------->
<nav class="topnav navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
<div class="container-fluid">
	<a class="navbar-brand" href="./index.html"><i class="fas fa-donate mr-2"></i><strong>BMCF</strong></a>
	<button class="navbar-toggler collapsed" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
	<span class="navbar-toggler-icon"></span>
	</button>
	<div class="navbar-collapse collapse" id="navbarColor02" style="">
		<ul class="navbar-nav mr-auto d-flex align-items-center">
			<li class="nav-item">
			<a class="nav-link" href="./index.html">Home <span class="sr-only">(current)</span></a>
			</li>
			<li class="nav-item">
			<a class="nav-link" href="about.html">About</a>
			</li>
		</ul>
		<ul class="navbar-nav ml-auto d-flex align-items-center">
			<li class="nav-item">
			<span class="col-lg-3 text-md-center text-lg-right mt-4 mb-4">
				<a href="./donate-form.html" class="btn btn-lg btn-info">Donate</a>
			</span>
			</li>
			<li class="nav-item">
			<span class="col-lg-3 text-md-center text-lg-right mt-4 mb-4">
				<a href="./login.html" class="btn btn-lg btn-info">Sign In</a>
			</span>
			</li>
		</ul>
	</div>
</div>
</nav>
<!-- End Navbar -->
    
<!-- Main -->
<div class="container pt-5 pb-5 d-md-flex align-items-center bg-lg">
	<div class="col-md-6 p-0 bg-indigo h-md-100">
		<div class="text-white d-md-flex align-items-center h-md-100 p-5 text-center justify-content-center">
			<div class="logoarea pt-2 pb-3">
				<p>
					<i class="fa fa-donate fa-3x"></i>
				</p>
				<h1 class="mb-0 mt-3 display-4">BMSC</h1>
				<h5 class="mb-4 font-weight-light"><i class="fab fa- fa-2x text-cyan"></i></h5>				
                <a class="btn btn-outline-white btn-lg btn-round" href="./register.html">Register <a href="#" class="hidden"></a>
                <a class="btn btn-outline-white btn-lg btn-round" href="./login.html">Sign In <a href="#" class="hidden"></a>
				</a>
			</div>
		</div>
	</div>
	<div class="col-md-6 p-0 bg-white h-100 loginarea">
		<div class="d-md-flex align-items-center h-100 p-5 justify-content-center">
			<form id="signupForm" class="border rounded p-5" method="POST">
				<h3 class="mb-4 text-center">Sign Up</h3>
				<div id="form-alert" class="" role="alert">
				</div>
                <div class="form-group">
					<input type="username" class="form-control" id="exampleInputUsername1" aria-describedby="Username" placeholder="Username" required="" name="username">
				</div>
				<div class="form-group">
					<input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="E-mail" required="" name="email">
				</div>
				<!-- <div class="form-group">
					<input type="username" class="form-control" id="exampleInputAddress" aria-describedby="Username" placeholder="Valid bsc wallet address" required="" name="address">
				</div> -->
				<div class="form-group">
					<input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password" required="" name="password">
				</div>
				<div class="form-group">
					<input type="password" class="form-control" id="exampleInputPassword2" placeholder="confirmPassword" required="" name="confirmPassword">
				</div>
				<p class="error" id="errorMessage"></p>
				<div class="form-group form-check">
					<input type="checkbox" class="form-check-input" id="exampleCheck1" required="">
					<label class="form-check-label small text-muted" for="exampleCheck1">I agree to the terms and conditions</label>
				</div>
				<button class="btn btn-success btn-round btn-block shadow-sm" id="submit-signup">Register</button>
				<small class="d-block mt-4 text-center">Already Have an account? <a class="text-gray" href="./login.html">Sign In instead</a></small>
			</form>
		</div>
	</div>
</div>
<!-- End Main -->

<!--------------------------------------
FOOTER
--------------------------------------->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 1440 126" style="enable-background:new 0 0 1440 126;" xml:space="preserve">
<path class="bg-black" d="M685.6,38.8C418.7-11.1,170.2,9.9,0,30v96h1440V30C1252.7,52.2,1010,99.4,685.6,38.8z"/>
</svg>
<footer class="bg-black pb-5">
<div class="container">
	<div class="row">
		
		<div class="col-6 col-md">
			<h5 class="mb-4 text-white">About BMCF</h5>
			<ul class="list-unstyled text-small">
				<li><a class="text-muted" href="./team.html">Team</a></li>
				<li><a class="text-muted" href="./about.html">About</a></li>
				<li><a class="text-muted" href="./blog.html">Blog</a></li>
				<li><a class="text-muted" href="./campaigns.html">Campaigns</a></li>
				<li><a class="text-muted" href="#">Privacy</a></li>
				<li><a class="text-muted" href="#">Terms</a></li>
			</ul>
		</div>
		<div class="col-12 col-md mr-4">
		    <h5 class="mb-4 text-white">Binance Masterclass Charity Funding</h5>
			<i class="fas fa-copyright text-white"> 2021</i>
		</div>
		<span class="col-lg-3 text-md-center text-lg-right mt-4 mb-4">
				<a href="#" class="btn btn-lg btn-info">Add Your Campaign</a>
		</span>
	</div>
</div>
</footer>
    
   
<!--------------------------------------
JAVASCRIPTS
--------------------------------------->    
<script src="./assets/js/vendor/jquery.min.js" type="text/javascript"></script>
<script src="./assets/js/vendor/popper.min.js" type="text/javascript"></script>
<script src="./assets/js/vendor/bootstrap.min.js" type="text/javascript"></script>
<script src="./assets/js/functions.js" type="text/javascript"></script>
    
<!-- Animation -->
<script src="./assets/js/vendor/aos.js" type="text/javascript"></script>
<noscript>
    <style>
        *[data-aos] {
            display: block !important;
            opacity: 1 !important;
            visibility: visible !important;
        }
    </style>
</noscript>
<script>
    AOS.init({
        duration: 700
    });
</script>
 
<!-- Disable animation on less than 1200px, change value if you like -->
<script>
AOS.init({
  disable: function () {
    var maxWidth = 1200;
    return window.innerWidth < maxWidth;
  }
});
</script>

<script>
	/* eslint-disable no-undef, no-unused-vars */
let status = 0,
  currentModal = '',
  loaderStatus = 0;
let errorMessage = document.getElementById('errorMessage');
let formAlert = document.getElementById('form-alert');

// const errorMessage = document.getElementsByClassName('error'),
  signupBtn = document.getElementById('submit-signup'),
//   loginBtn = document.getElementById('submit-login'),
//   checkUsOutBtn = document.getElementById('check-out'),
//   loginForm = document.getElementById('loginForm'),
  signupForm = document.getElementById('signupForm'),
//   navBar = document.getElementById('check-it'),
//   toast = document.getElementById('toast'),
//   loginRoute = 'https://andela-vlf.herokuapp.com/api/v1/auth/login',
  signupRoute = 'https://charity-funding-bsc.herokuapp.com/api/v1/user/signup',

  // algorithm function for homepage animated text
  // algorithm for loader animation
  loader = (id) => {
    switch (loaderStatus) {
      case 0:
        document.getElementById(id).innerText = 'loading.';
        loaderStatus = 1;
        break;
      case 1:
        document.getElementById(id).innerText = 'loading..';
        loaderStatus = 2;
        break;
      case 2:
        document.getElementById(id).innerText = 'loading...';
        loaderStatus = 3;
        break;
      case 3:
        document.getElementById(id).innerText = 'loading....';
        loaderStatus = 0;
        break;
      default:
        document.getElementById(id).innerText = 'loading.....';
        loaderStatus = 0;
    }
  },

//   //  function for displaying toaster
//   showToast = (toastClass, data, redirectUrl) => {
//     toast.classList.remove('hidden');
//     toast.classList.add(toastClass);
//     toast.innerHTML = `<p>${data.substr(0, 50)}</p>`;
//     const flashError = setTimeout(() => {
//       toast.classList.add('hidden');
//       toast.classList.remove(toastClass);
//       if (redirectUrl) {
//         window.location.href = redirectUrl;
//       }
//     }, 5000);
//   },

  // function for toggling login and signup modal
//   toggleModal = (e) => {
//     const elem = e.target.getAttribute('data-modal');
//     if (currentModal && currentModal !== elem) {
//       document.getElementById(currentModal).classList.add('hidden');
//       document.getElementById(elem).classList.remove('hidden');
//     } else {
//       document.getElementById(elem).classList.toggle('hidden');
//     }
//     currentModal = elem;
//   },

  // function for dismissing modal
//   dismissModal = () => {
//     if (currentModal) {
//       document.getElementById(currentModal).classList.add('hidden');
//       currentModal = null;
//     }
//   },

  // check password function for validating password
  checkPassword = () => {
    if (signupForm.confirmPassword.value
      && (signupForm.password.value !== signupForm.confirmPassword.value)) {
      errorMessage.classList.add('alert');
	  errorMessage.classList.add('alert-danger');
      errorMessage.innerHTML = 'password does not match';
      signupBtn.disabled = true;
    }

    if (signupForm.confirmPassword.value === signupForm.password.value) {
      errorMessage.innerHTML = '';
      errorMessage.classList.remove('alert');
	  errorMessage.classList.remove('alert-danger');
      signupBtn.disabled = false;
    }
  },

//   checkIt = () => {
//     const user = JSON.parse(localStorage.getItem('user')),
//       token = `Bearer ${localStorage.getItem('token')}`;
//     if (!token || !user) {
//       navBar.innerHTML = `
//                           <li class="to-left"><a>SENDIT</a></li> 
//                           <li class="to-right trigger point-it" data-modal="login">Login</li>
//                           <li class="to-right trigger point-it" data-modal="signup">Signup</li>
//                           <li class="to-right">Home</li>
//                         `;
//     } else {
//       navBar.innerHTML = `
//                           <li class="to-left"><a>SENDIT</a></li> 
//                           <li class="to-right point-it" id="logout">Logout</li>
//                           <li class="to-right">Home</li>
//                         `;
//     }
//   },

//   checkState = () => {
//     const user = JSON.parse(localStorage.getItem('user')),
//       token = `Bearer ${localStorage.getItem('token')}`;
//     if (!token || !user) {
//       showToast('toast-red', 'Please login/signup to access this page');
//       return;
//     }
//     if (user.isadmin) {
//       window.location.href = 'admin.html';
//       return;
//     }
//     window.location.href = 'parcel.html';
//   },

  // create account method for signup
  clearAlert = () => {
	formAlert.innerHTML = '';
  },
  showErrorAlert = (data) => {
	  const alertchild = `<div class="alert alert-danger">
	  <i class="fas fa-bullhorn"></i> ${data} <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">×</span>
    </button>
	</div>`;
	formAlert.innerHTML += alertchild;
  },
  showSuccessAlert = (data) => {
	  const alertchild = `<div class="alert alert-success">
	  <i class="fas fa-bullhorn"></i> ${data} <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">×</span>
    </button> 
	</div>`
	formAlert.innerHTML += alertchild;
  }
  createAccount = (evt) => {
    evt.preventDefault();
    const headers = new Headers({
        'content-type': 'application/json',
      }),

      userDetails = {
        username: signupForm.username.value,
		    email: signupForm.email.value,
        // address: signupForm.address.value,
        password: signupForm.password.value
      },

      startLoader = setInterval(loader, 500, 'submit-signup');

    fetch(signupRoute, {
      method: 'POST',
      body: JSON.stringify({ user: userDetails }),
      headers,
    })
      .then(res => Promise.all([res.json(), res]))
      .then(([data, res]) => {
		  console.log(res.status);
		//   clearAlert();
        if (!res.ok) {
			if(res.status === 400) {
				const body = data.data.split('|');
				body.pop();
				body.forEach(element => {
					showErrorAlert(element);
				});
			} else {
				showErrorAlert(data.data);
			}
		  console.log(data);
        //   showToast('toast-red', data.error);
		clearInterval(startLoader);
          signupBtn.innerText = 'Signup';
          return;
        }
		console.log("successful")
		clearInterval(startLoader);
        signupBtn.innerText = 'Signup';
        showSuccessAlert("registration successful you will be automatically redirected to your dashboard");
        localStorage.setItem('token', data.data.token);
        localStorage.setItem('user', JSON.stringify(data.data.user));
      })
      .catch(error => {
		console.log(error);
	  });
  },

  // create account method for signup
  loginUser = (evt) => {
    evt.preventDefault();
    const headers = new Headers({
        'content-type': 'application/json',
      }),

      loginDetails = {
        email: loginForm.email.value,
        password: loginForm.password.value,
      },

      startLoader = setInterval(loader, 500, 'submit-login');
    console.log(loginDetails);
    fetch(loginRoute, {
      method: 'POST',
      body: JSON.stringify({ user: loginDetails }),
      headers,
    })
      .then(res => Promise.all([res.json(), res]))
      .then(([data, res]) => {
        if (!res.ok) {
          clearInterval(startLoader);
          showToast('toast-red', data.error);
          loginBtn.innerText = 'Login';
          return;
        }
        loginBtn.innerText = 'Login';
        dismissModal();
        currentModal = '';
        showToast('toast-green', 'login successful', 'parcel.html');
        localStorage.setItem('token', data.data.token);
        localStorage.setItem('user', JSON.stringify(data.data.user));
      })
      .catch(error => alert(error.message));
  };

// onload methods for ui animation and signup and login modal events
window.onload = () => {
	// checkIt();
};

// add event listeners
signupForm.confirmPassword.addEventListener('input', checkPassword);
signupForm.addEventListener('submit', createAccount);
</script>
</body>
</html>